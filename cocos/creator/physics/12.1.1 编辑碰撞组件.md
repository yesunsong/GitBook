#### 编辑碰撞组件

如果想为一个物体添加碰撞检测，就要为物体添加碰撞组件，可以在“添加组件→碰撞组件”中选择适合的碰撞组件，目前可以选择的组件包括：矩形碰撞组件（Box Collider），圆形碰撞组件（Circle Collider）以及多边形碰撞组件（Polygon Collider），一个物理碰撞组件包含的内容如图8-1所示。

![img](https://gitee.com/nlpleaf/PicGo/raw/master/7dd11c46978be2fa3c1192a29dd9d45f)

图8-1 碰撞组件

三种碰撞组件的属性基本可以包括三个部分，一是Edit，一个是Tag，另外还有位置信息Offset和Points，首先看最简单的**矩形碰撞组件**。

首先，选中Editing可以进入碰撞图形编辑状态，

当编辑时鼠标悬浮在矩形碰撞区域的顶点上时，可以按住鼠标左键并拖动，以同时修改矩形碰撞组件的长宽；

当鼠标悬浮在矩形碰撞区域的边缘线上时，按住鼠标左键拖动，将修改矩形碰撞组件的长或宽中的一个方向，

按住shift键拖动时，在拖动过程中会保持开始时的长宽比例，

按住alt键时，在拖动的过程会保持矩形中心点位置不变，如图8-2所示。

![img](https://gitee.com/nlpleaf/PicGo/raw/master/5d65ec816b99c39d8c39cb42a1afaecb)

图8-2 编辑矩形碰撞组件的碰撞区域

如果编辑的是**圆形碰撞组件**的话，则会出现类似如图8-3所示的圆形编辑区域，当鼠标悬浮在圆形编辑区域的边缘线上时，边缘线会变亮，这时按住鼠标左键拖动将可以修改 圆形碰撞组件 的半径大小。

![img](https://gitee.com/nlpleaf/PicGo/raw/master/cdd1fea2f822610f2516f2d1ad8f730f)

图8-3 编辑矩形碰撞组件的碰撞区域

如果编辑的是**多边形碰撞组件**的话，则会发现类似如图8-4所示的多边形编辑区域区域中的这些点都是可以拖动的，拖动的结果会反映到 多边形碰撞组件 的 **points** 属性中。

![img](https://gitee.com/nlpleaf/PicGo/raw/master/6d2a09692f470bf0501e6d97c3efc228)

图8-4 编辑多边形碰撞组件的碰撞区域

当鼠标移动到两点连成的线段上时，鼠标指针会变成“**添加**”的样子，这时单击鼠标左键会在这个地方添加一个点到多边形碰撞组件中。

当按住ctrl或command键时，移动鼠标到多边形顶点上，会发现顶点以及连接的两条线条变成红色，这时候单击鼠标左键将会删除多边形碰撞组件中的这个点。

在Cocos Creator 1.5以及以后的版本中，多边形碰撞组件中添加了一个 **Regenerate Points** 的功能，这个功能可以根据组件相关节点上的精灵组件的贴图的像素点来自动生成相应轮廓的顶点。

Threshold指明生成贴图轮廓顶点间的最小距离，值越大则生成的点越少，可根据需求进行调节，如图8-5所示，为使用Regenerate Points功能生成的多边形。

![img](https://gitee.com/nlpleaf/PicGo/raw/master/4e0fcbb1e7b682de6eb655f1eb1274c7)

![img](https://gitee.com/nlpleaf/PicGo/raw/master/5d441f923008558f58defb1d0dbdb524)

图8-5 直接生成的多边形碰撞组件的碰撞区域

需要说明的是Threshold属性指明的是生成贴图轮廓顶点间的最小距离，也就是说这个值越小，生成的矩形的边数也就越多，粒度也就越细致。但是需要明确的是，这种细致的粒度是有“副作用”的，它会造成处理性能的下降，所以<u>要合理地选择Threshold的属性值和处理的粒度。</u>

在所有的碰撞组件编辑中，都可以在各自的碰撞中心区域按住鼠标左键拖拽来快速编辑碰撞组件的偏移量。



#### 修改碰撞组件偏移量

在所有的碰撞组件编辑中，都可以在各自的 **碰撞中心区域** 点击鼠标左键拖拽来快速编辑碰撞组件的 **偏移量**

![img](https://gitee.com/nlpleaf/PicGo/raw/master/dac31986102d69e25723979dd8fc6b0c)

