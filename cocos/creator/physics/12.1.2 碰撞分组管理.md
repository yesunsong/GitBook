#### 碰撞分组管理

一般情况下，在一个“互相碰撞”的世界中，往往要分清“敌军友军”，因为一般在游戏的互相碰撞中，往往需要有分组的概念，比如在飞机游戏中，我方控制的飞机、飞机释放的子弹，以及npc的友军飞机和子弹都可以被分到另一组，然后敌人的飞机和敌人的子弹分为另一组，这样在处理碰撞的时候就可以更加有的放矢，我们可以把注意力放到自己关注的碰撞上。

要在项目设置面板中设置分组管理，可通过“菜单栏→项目→项目设置→分组管理”打开分组管理界面，如图8-6所示。

![img](https://gitee.com/nlpleaf/PicGo/raw/master/20200622180315.png)

图8-6 分组管理界面

分组管理默认提供一个Default分组，它也是目前所有节点中默认的分组，每次单击“添加分组按钮”都可以添加一个新的分组，但是需要注意的是<u>**分组一旦添加就不可以删除，但是可以重新命名**</u>。

这个分组为本书第10章中飞机大战的分组设置，包括我方飞机（HeroPlane），我方子弹（HeroBullet），敌方飞机（EnemyPlane）和敌方子弹（EnemyBullet）。

在分组管理的下面可以进行碰撞分组配对表的管理，如图8-7所示。

![img](https://gitee.com/nlpleaf/PicGo/raw/master/20200622180316.jpg)

图8-7 分组配对管理列表

这张表里面的行与列分别列出了分组列表里面的项，分组列表里的修改将会实时映射到这张表里。你可以在这张表里面配置哪一个分组可以对其他的分组进行碰撞检测，假设“a行”“b列”被勾选上，那么表示“a行”上的分组将会与“b列”上的分组进行碰撞检测。

根据上述的分类，这里面设置的是我方飞机和敌方飞机、我方子弹和敌方飞机、敌方飞机和我方子弹三组碰撞是可以被检测到的。



#### 碰撞分组配对

在 **分组列表** 下面可以进行 **碰撞分组配对** 表的管理，如下图

![img](https://gitee.com/nlpleaf/PicGo/raw/master/20200622180317.png)

这张表里面的行与列分别列出了 **分组列表** 里面的项，**分组列表** 里的修改将会实时映射到这张表里。你可以在这张表里面配置哪一个分组可以对其他的分组进行碰撞检测，假设 **a 行 b 列** 被勾选上，那么表示 **a 行** 上的分组将会与 **b 列** 上的分组进行碰撞检测。
运行时修改节点的 group 之后，需要调用 Collider 的 apply，修改才会生效。

根据上面的规则，在这张表里产生的碰撞对有：

Platform - Bullet
		Collider - Collider
		Actor - Wall
		Actor - Platform